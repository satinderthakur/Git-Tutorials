utlity functions for version 3